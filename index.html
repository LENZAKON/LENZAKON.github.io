<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.3">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.3" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta property="og:type" content="website">
<meta property="og:title" content="LENZAKON">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="LENZAKON">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="LENZAKON">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.3',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/"/>





  <title>LENZAKON</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">LENZAKON</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-主页"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-归档页"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/10/《图解HTTP》(五)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="LENZAKON">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LENZAKON">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/10/《图解HTTP》(五)/" itemprop="url">《图解HTTP》(五)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-10T10:08:18+08:00">
                2018-03-10
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="与HTTP协作的Web服务器"><a href="#与HTTP协作的Web服务器" class="headerlink" title="与HTTP协作的Web服务器"></a>与HTTP协作的Web服务器</h1><h2 id="单台虚拟主机实现多个域名"><a href="#单台虚拟主机实现多个域名" class="headerlink" title="单台虚拟主机实现多个域名"></a>单台虚拟主机实现多个域名</h2><h2 id="通信数据转发程序"><a href="#通信数据转发程序" class="headerlink" title="通信数据转发程序"></a>通信数据转发程序</h2><h3 id="代理："><a href="#代理：" class="headerlink" title="代理："></a>代理：</h3><ul>
<li><p>代理服务器转发请求或响应时，可以追加写入<code>Via</code>首部字段，<code>Via</code>首部字段可以标记出经过的主机信息。</p>
</li>
<li><p>作用：</p>
<ul>
<li>利用缓存技术减少带宽</li>
<li>组织内部针对特定网站的访问控制</li>
<li>以获取访问日志为主要目的</li>
</ul>
</li>
<li><p>分类：</p>
<ul>
<li>是否使用缓存</li>
<li>是否会修改报文</li>
<li>缓存代理：转发响应时，把资源缓存在代理服务器上，再次请求相同资源时直接把缓存返回</li>
<li>透明代理：不对报文进行任何加工</li>
</ul>
</li>
</ul>
<h3 id="网关："><a href="#网关：" class="headerlink" title="网关："></a>网关：</h3><p>作用：</p>
<ul>
<li>能使通信线路上的服务器提供非HTTP协议服务</li>
<li>能提高通信安全性，可以在客户端与网关之间的通信线路上加密</li>
</ul>
<h3 id="隧道："><a href="#隧道：" class="headerlink" title="隧道："></a>隧道：</h3><p>作用：<br>和远距离的服务器安全通信。</p>
<h2 id="保存资源的缓存"><a href="#保存资源的缓存" class="headerlink" title="保存资源的缓存"></a>保存资源的缓存</h2><blockquote>
<p>缓存是指代理服务器或客户端本地磁盘内保存的资源副本。利用缓存可减少对源服务器的访问,因此也就节省了通信流量和通信时间。</p>
<p>缓存服务器是代理服务器的一种,并归类在缓存代理类型中。换句话说,当代理转发从服务器返回的响应时,代理服务器将会保存一份资源的副本。    </p>
</blockquote>
<h3 id="缓存资源的有效期限"><a href="#缓存资源的有效期限" class="headerlink" title="缓存资源的有效期限"></a>缓存资源的有效期限</h3><p>即使存在缓存，也会因为客户端的要求、缓存的有效期等因素，向源服务器确认资源的有效性。若判断缓存失效，缓存服务器将会再次从源服务器上获取“新”资源。</p>
<h3 id="客户端的缓存"><a href="#客户端的缓存" class="headerlink" title="客户端的缓存"></a>客户端的缓存</h3><p>缓存不仅可以存在于缓存服务器内，还可以存在客户端浏览器内。和缓存服务器相同的一点是,当判定缓存过期后,会向源服务器确认资源的有效性。若判断浏览器缓存失效,浏览器会再次请求新资源。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/10/《图解HTTP》(四)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="LENZAKON">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LENZAKON">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/10/《图解HTTP》(四)/" itemprop="url">《图解HTTP》(四)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-10T10:08:18+08:00">
                2018-03-10
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="3xx状态码"><a href="#3xx状态码" class="headerlink" title="3xx状态码"></a>3xx状态码</h1><p>例子：假设要方位一个 url, 该 url 没有尾部斜杠，认为请求的是文件</p>
<ul>
<li>如果文件存在，发送文件</li>
<li>如果文件不存在，判断同名的目录是否存在<ul>
<li>若存在，返回301，并在原来 url 添加上 “/“ 作为要跳转到的 location</li>
<li>若不存在目录，返回404</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">location = url + <span class="string">'/'</span></span><br><span class="line">request.writeHead(<span class="number">301</span>, &#123;</span><br><span class="line">    <span class="string">'Location'</span>: location</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>浏览器收到301响应时，会根据头部指定的 location 字段值，向服务器发一个新请求。        </p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/10/《图解HTTP》(七)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="LENZAKON">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LENZAKON">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/10/《图解HTTP》(七)/" itemprop="url">《图解HTTP》(七)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-10T10:08:18+08:00">
                2018-03-10
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="HTTPS"><a href="#HTTPS" class="headerlink" title="HTTPS"></a>HTTPS</h1><h2 id="HTTP缺点：（未加密的协议也会存在）"><a href="#HTTP缺点：（未加密的协议也会存在）" class="headerlink" title="HTTP缺点：（未加密的协议也会存在）"></a>HTTP缺点：（未加密的协议也会存在）</h2><ul>
<li>通信时使用明文，内容可能会被窃听</li>
<li>不验证通信方的身份，所以可能遭遇伪装</li>
<li>无法证明报文的完整性，所有可能已遭篡改</li>
</ul>
<p>缺点一：</p>
<p>原因：TCP/IP 是可能被窃听的网络（TCP/IP协议族的工作机制所致）</p>
<p>解决：加密处理防止被窃听</p>
<ul>
<li>通信的加密：使用<code>SSL</code>或<code>TLS</code>形成安全的通信线路。</li>
<li>内容的加密：<ul>
<li>对报文主体加密，报文首部不加密</li>
<li>客户端和服务器同时具备加密和解密机制</li>
<li>扔有被篡改的风险</li>
</ul>
</li>
</ul>
<p>缺点二：</p>
<p>原因：任何人都可发出请求</p>
<pre><code>- 服务器是否为伪装的
- 客户端是否为伪装的
- 正在通信的对方是否有访问权限
- 无法判断请求来自何方
- 无意义的请求也会收下（海量请求下在DoS攻击）
</code></pre><p>解决：查明对手证书</p>
<p>SSL作用：</p>
<ol>
<li>加密处理<br>2.确认对方证书。证书由第三方机构颁发，用以证明服务器和客户端是实际存在的。</li>
</ol>
<p>缺点三：</p>
<p>接受到的内容有误，中途可能被篡改</p>
<p>防止篡改：<br>SSL：</p>
<ul>
<li>认证</li>
<li>加密处理</li>
<li>摘要功能 </li>
</ul>
<h2 id="HTTP-加密-认证-完整保护-HTTPS"><a href="#HTTP-加密-认证-完整保护-HTTPS" class="headerlink" title="HTTP + 加密 + 认证 + 完整保护 = HTTPS"></a>HTTP + 加密 + 认证 + 完整保护 = HTTPS</h2><p><img src="/images/1520660482076.png" alt="image"><br><img src="/images/1520660537442.png" alt="image"></p>
<h3 id="相互交换密钥的公开密钥加密技术"><a href="#相互交换密钥的公开密钥加密技术" class="headerlink" title="相互交换密钥的公开密钥加密技术"></a>相互交换密钥的公开密钥加密技术</h3><ul>
<li><p>SSL 加密处理方式：公开密钥加密</p>
</li>
<li><p>公开密钥加密</p>
<ul>
<li>私钥（解密）</li>
<li>公钥（加密）</li>
</ul>
</li>
<li><p>HTTPS 采用混合加密：在交换密钥环节使用公开密钥加密方式，确定密钥安全后，之后加你爱的通信交换报文阶段则使用共享密钥加密方式。</p>
</li>
<li><p>公开密钥证书：</p>
<ul>
<li>作用：证明公开密钥正确性（即公钥为服务器想要发行的公钥）</li>
<li>数字证书认证机构的业务流程<ul>
<li>服务器把自己的公钥给数字证书认证机构</li>
<li>数字证书认证机构用自己的私钥进行数字签名并颁发公钥证书</li>
<li>客户端拿到公钥证书后，使用原本就已植入在浏览器里的数字证书认证技工的公钥，验证功能规约证书上的数字签名</li>
</ul>
</li>
</ul>
</li>
<li><p>EV SSL证书：证明对方服务器背后运营的企业是否真实存在</p>
</li>
<li><p>客户端证书：证明服务器正在通信的对方始终是预料中的客户端</p>
</li>
<li><p>自签名证书：用<code>openSSL</code>构建自己的认证机构，不过在互联网上无效。</p>
</li>
</ul>
<h2 id="HTTPS通信步骤："><a href="#HTTPS通信步骤：" class="headerlink" title="HTTPS通信步骤："></a>HTTPS通信步骤：</h2><p><img src="/images/1520662036331.png" alt="image">        </p>
<ol>
<li><p>客户端通过发送 <code>Client Hello</code> 报文开始 <code>SLL</code> 通信。报文中包含客户端支持的 <code>SSL</code> 的指定版本，加密组件（ <code>Cipher Suite</code> ）列表（所使用的加密算法及密钥长度等）</p>
</li>
<li><p>服务器可进行 <code>SSL</code> 通信时，会以 <code>Server Hello</code> 报文作为应答，和客户端一样，在报文中包含 <code>SSL</code> 版本以及加密组件。服务器的加密组件内容是从接受到的客户端加密组件中筛选出来的。</p>
</li>
<li><p>之后服务器发送 <code>Certificate</code> 报文。报文中包含公开密钥证书。</p>
</li>
<li><p>最后服务器发送 <code>Server Hello Done</code> 报文通知客户端，最初阶段的 <code>SSL</code> 握手协商部分结束</p>
</li>
<li><p><code>SSL</code> 第一次握手结束之后，客户端以 <code>Client Key Exchange</code> 报文作为回应。报文中包含通信加密中使用的一种称为 <code>Pre-master secret</code> 的随机字符串。该报文用步骤3中的公开密钥进行加密。</p>
</li>
<li><p>接着客户端继续发送 <code>Change Cipher Spec</code> 报文。该报文之后的通信会采用 <code>Pre-master secret</code> 密钥加密</p>
</li>
<li><p>客户端发送 <code>Finished</code> 报文，该报文包含连接至今全部报文的整体校验值。这次握手协商是否能够成功，要以服务器是否能够正确解密该报文作为判定标准。</p>
</li>
<li><p>服务器同样发送 <code>Change Cipher Spec</code> 报文。</p>
</li>
<li><p>服务器同样发送 <code>Finished</code> 报文。</p>
</li>
<li><p>服务器和客户端的 <code>Finished</code> 报文交换完毕之后， <code>SSL</code> 连接就算建立完成。当然，通信会收到 <code>SSL</code> 保护。从此处开始进行应用层协议的通信，即发送<code>HTTP</code>请求。</p>
</li>
<li><p>应用层协议通信，即发送<code>HTTP</code>响应。</p>
</li>
<li><p>最后由客户端断开连接。断开连接时，发送 <code>close_notify</code> 报文。上图做了一些省略，这步之后再发送 <code>TCP FIN</code> 报文来关闭与 <code>TCP</code> 的通信。</p>
</li>
</ol>
<p>在以上流程中,应用层发送数据时会附加一种叫做 <code>MAC</code>(Message Authentication Code)的报文摘要。<code>MAC</code> 能够查知报文是否遭到篡改,从而保护报文的完整性。</p>
<p><img src="/images/1520664253167.png" alt="image"></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/10/《图解HTTP》(一)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="LENZAKON">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LENZAKON">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/10/《图解HTTP》(一)/" itemprop="url">《图解HTTP》(一)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-10T10:08:18+08:00">
                2018-03-10
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="TCP-IP-协议族"><a href="#TCP-IP-协议族" class="headerlink" title="TCP/IP 协议族"></a>TCP/IP 协议族</h1><p><img src="/images/1520647771114.png" alt="image"></p>
<h2 id="与HTTP协议密切相关的"><a href="#与HTTP协议密切相关的" class="headerlink" title="与HTTP协议密切相关的"></a>与HTTP协议密切相关的</h2><ul>
<li><p>IP协议（网络层）负责传输</p>
<p>  使用ARP协议，实现通过IP地址查找MAC地址</p>
</li>
<li><p>TCP协议（传输层）负责可靠性</p>
<p>  将大数据分割，通过三次握手确保成功送达，握手的过程使用了TCP的标志 ——— SYN，ACK</p>
<p>  握手过程：<br>  <img src="/images/1520648427858.png" alt="image"></p>
</li>
<li><p>DNS服务（应用层）负责域名解析</p>
<p>  把域名转成IP地址</p>
</li>
</ul>
<h2 id="各协议与HTTP协议的关系"><a href="#各协议与HTTP协议的关系" class="headerlink" title="各协议与HTTP协议的关系"></a>各协议与HTTP协议的关系</h2><p><img src="/images/1520648598468.png" alt="image"></p>
<h2 id="URL-和-URI"><a href="#URL-和-URI" class="headerlink" title="URL 和 URI"></a>URL 和 URI</h2><p>URI：由某个协议方案表示的资源的定位标识符</p>
<p>URI用字符串标识某一互联网资源，URL标识资源的地址（互联网上所处的位置）URL 是 URI 的子集</p>
<p>URI格式：<br><img src="/images/1520649180281.png" alt="image"></p>
<p>登录信息：指定用户名和密码，作为从服务端获取资源时必要的登录信息（可选）</p>
<p>服务器地址：域名，IPV4，IPV6</p>
<p>查询字符串：针对文件路径内的资源传入任意参数（可选）</p>
<p>片段标识符：标识以获取资源中的子资源（文档中的某个位置）</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/10/《图解HTTP》(二)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="LENZAKON">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LENZAKON">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/10/《图解HTTP》(二)/" itemprop="url">《图解HTTP》(二)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-10T10:08:18+08:00">
                2018-03-10
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="HTTP"><a href="#HTTP" class="headerlink" title="HTTP"></a>HTTP</h1><h2 id="请求-响应报文"><a href="#请求-响应报文" class="headerlink" title="请求/响应报文"></a>请求/响应报文</h2><h3 id="请求报文"><a href="#请求报文" class="headerlink" title="请求报文"></a>请求报文</h3><p><img src="/images/1520649781882.png" alt="image"></p>
<h3 id="响应报文"><a href="#响应报文" class="headerlink" title="响应报文"></a>响应报文</h3><p><img src="/images/1520649817709.png" alt="image"></p>
<h2 id="URI"><a href="#URI" class="headerlink" title="URI"></a>URI</h2><ul>
<li>完整URI</li>
<li>在首部Host写明域名或IP地址</li>
<li>* 不是访问特定资源，而是对服务器本身发请求</li>
</ul>
<h2 id="不保存状态（无状态，cookie-实现保存状态）"><a href="#不保存状态（无状态，cookie-实现保存状态）" class="headerlink" title="不保存状态（无状态，cookie 实现保存状态）"></a>不保存状态（无状态，cookie 实现保存状态）</h2><h2 id="方法："><a href="#方法：" class="headerlink" title="方法："></a>方法：</h2><ul>
<li><p>GET：获取资源</p>
</li>
<li><p>POST：传输实体的主体</p>
</li>
<li><p>PUT：传输文件</p>
</li>
<li><p>HEAD：获得报文首部，不返回报文主体部分，用于确认 URI 的有效性和资源更新的日期时间</p>
</li>
<li><p>DELETE：删除文件</p>
</li>
<li><p>OPTIONS：询问请求 URI 指定的资源支持的方法</p>
</li>
<li><p>TRACE：追踪路径，让web服务端将之前的通信环回给客户端（引发XST攻击）从代理服务器罗中转时，请求可能被篡改。<br><img src="/images/1520650427605.png" alt="image"></p>
</li>
<li><p>CONNECT：要求用隧道协议连接代理。与代理服务器通信建立隧道，用隧道协议进行TCP通信（使用SSL和 TLS把通信内容加密后在网络隧道传输）</p>
</li>
</ul>
<h2 id="持久连接"><a href="#持久连接" class="headerlink" title="持久连接"></a>持久连接</h2><p>概念：只要任意一端没有明确提出断开连接，则保持TCP连接状态</p>
<p>管线化：同时并发发送多个请求</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/10/《图解HTTP》(八)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="LENZAKON">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LENZAKON">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/10/《图解HTTP》(八)/" itemprop="url">《图解HTTP》(八)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-10T10:08:18+08:00">
                2018-03-10
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Web-攻击"><a href="#Web-攻击" class="headerlink" title="Web 攻击"></a>Web 攻击</h1><h2 id="转义不完全"><a href="#转义不完全" class="headerlink" title="转义不完全"></a>转义不完全</h2><h3 id="跨站脚本攻击（XSS）"><a href="#跨站脚本攻击（XSS）" class="headerlink" title="跨站脚本攻击（XSS）"></a>跨站脚本攻击（XSS）</h3><p>在浏览器内运行非法的 <code>HTML</code> 标签和 <code>JS</code></p>
<p>原因：动态创建 <code>HTML</code></p>
<h3 id="SQL-注入攻击"><a href="#SQL-注入攻击" class="headerlink" title="SQL 注入攻击"></a>SQL 注入攻击</h3><p>将 <code>SQL</code> 语句改成开发者意想不到的形式</p>
<p>例子：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> bookTb1 <span class="keyword">where</span> author = <span class="string">'$q'</span> <span class="keyword">and</span> flag = <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> bookTb1 <span class="keyword">where</span> author = <span class="string">'上野'</span><span class="comment">--‘and flag = 1</span></span><br></pre></td></tr></table></figure></p>
<p>输入<code>’上野‘--</code>导致<code>and</code>后面被当成注释省略。</p>
<h3 id="OS-注入攻击"><a href="#OS-注入攻击" class="headerlink" title="OS 注入攻击"></a>OS 注入攻击</h3><ul>
<li>向 <code>shell</code> 发送命令，让命令行启动程序</li>
<li>调用 <code>shell</code> 函数的地方就有被攻击的风险， web 应用中可以通过 <code>shell</code> 来调用操作系统命令，存在疏忽时会执行插入的非法<code>OS</code>命令。</li>
</ul>
<h3 id="HTTP-首部注入攻击"><a href="#HTTP-首部注入攻击" class="headerlink" title="HTTP 首部注入攻击"></a>HTTP 首部注入攻击</h3><ul>
<li>指攻击者通过在响应首部字段中插入换行，添加任意响应首部或主体的一种攻击。</li>
<li>向首部主体内添加内容的统计成为 HTTP响应截断攻击。</li>
</ul>
<p>例子：</p>
<p>将一个 <code>ID</code> 值反映在响应内的 <code>Location</code> 首部字段内实现重定向。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Location: http://example.com/?cat=101</span><br><span class="line">101 替换成 101%OD%OASet-Cookie: +SID=12345</span><br><span class="line">Location: http://example.com/?cat=101(换行符%OD%OA)</span><br><span class="line">Set-Cookie: +SID=12345</span><br></pre></td></tr></table></figure></p>
<p>攻击者修改了 <code>cookie</code> 的信息。</p>
<p>响应截断攻击例子：</p>
<p>使用两个<code>%OD%OA</code>做出<code>HTTP</code>首部与主体分割所需的空行，会使伪造的主体返回一个伪造的页面，再让用户输入个人信息，达到和跨站脚本攻击相同的效果。</p>
<h3 id="邮件首部注入攻击"><a href="#邮件首部注入攻击" class="headerlink" title="邮件首部注入攻击"></a>邮件首部注入攻击</h3><p>相邮件首部 <code>To</code> 或 <code>Subject</code> 内添加非法内容。</p>
<p>例子：</p>
<ol>
<li>改写 <code>To</code> 和 <code>Subject</code> 等邮件首部<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bob@hackr.jp%OD%OABcc: user@example.com</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>向Bcc邮箱地址追加发送了邮件。</p>
<ol>
<li>篡改邮件文本，向文本添加附件<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bob@hackr.jp%OD%OA%OD%OA Test Message</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="目录遍历攻击"><a href="#目录遍历攻击" class="headerlink" title="目录遍历攻击"></a>目录遍历攻击</h3><p>使用”../“相对路径定位到本不该被访问到的服务器上的路径</p>
<p>解决：</p>
<ol>
<li>转义</li>
<li>关闭指定对任意文件名的访问权限。</li>
</ol>
<h2 id="因设置或设计上的缺陷引发的安全漏洞"><a href="#因设置或设计上的缺陷引发的安全漏洞" class="headerlink" title="因设置或设计上的缺陷引发的安全漏洞"></a>因设置或设计上的缺陷引发的安全漏洞</h2><h3 id="强制浏览"><a href="#强制浏览" class="headerlink" title="强制浏览"></a>强制浏览</h3><p>例子：虽然没哟权限访问某一页面，却可以直接通过输入一个 <code>url</code> 访问页面中的某一图片</p>
<h3 id="不正确的错误消息处理"><a href="#不正确的错误消息处理" class="headerlink" title="不正确的错误消息处理"></a>不正确的错误消息处理</h3><p>web应用的错误消息内包含对攻击者有用的消息</p>
<p>例子：登录时提供“账号未注册”，这也能为攻击者提供有用信息。</p>
<h3 id="开发重定向"><a href="#开发重定向" class="headerlink" title="开发重定向"></a>开发重定向</h3><p>是一种对指定的任意 <code>URL</code> 作重定向跳转的功能。</p>
<p>例子：指定的重定向 <code>URL</code> 到某个恶意的 web 网站</p>
<h2 id="因会话管理疏忽引发的安全漏洞"><a href="#因会话管理疏忽引发的安全漏洞" class="headerlink" title="因会话管理疏忽引发的安全漏洞"></a>因会话管理疏忽引发的安全漏洞</h2><p>会话管理：管理用户状态的必备功能。</p>
<p>在会话管理上有所疏忽会导致用户的认证状态被盗取等</p>
<h3 id="会话挟持"><a href="#会话挟持" class="headerlink" title="会话挟持"></a>会话挟持</h3><p>攻击者拿到用户会话ID伪装成用户<br>攻击者获得会话ID的途径</p>
<ul>
<li>推测会话ID</li>
<li>使用窃听或XSS</li>
<li>使用会话固定攻击</li>
</ul>
<h3 id="会话固定攻击"><a href="#会话固定攻击" class="headerlink" title="会话固定攻击"></a>会话固定攻击</h3><p><img src="/images/1520666308048.png" alt="image"></p>
<h3 id="跨站点请求伪造"><a href="#跨站点请求伪造" class="headerlink" title="跨站点请求伪造"></a>跨站点请求伪造</h3><p><img src="/images/1520666394263.png" alt="image"></p>
<h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><h3 id="点击劫持"><a href="#点击劫持" class="headerlink" title="点击劫持"></a>点击劫持</h3><p>加透明按钮做成陷阱覆盖在web上</p>
<h3 id="DoS攻击"><a href="#DoS攻击" class="headerlink" title="DoS攻击"></a>DoS攻击</h3><p>让运行中的服务呈停止状态</p>
<ul>
<li>海量请求</li>
<li>攻击安全漏洞是服务停止</li>
</ul>
<h3 id="后门程序"><a href="#后门程序" class="headerlink" title="后门程序"></a>后门程序</h3><p>开发设置的隐藏入口，可不按正常步骤使用受限功能</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/10/《图解HTTP》(六)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="LENZAKON">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LENZAKON">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/10/《图解HTTP》(六)/" itemprop="url">《图解HTTP》(六)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-10T10:08:18+08:00">
                2018-03-10
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="HTTP首部"><a href="#HTTP首部" class="headerlink" title="HTTP首部"></a>HTTP首部</h1><h2 id="HTTP报文首部"><a href="#HTTP报文首部" class="headerlink" title="HTTP报文首部"></a>HTTP报文首部</h2><p>作用：为客户端和服务器分别出路请求和响应提供所需要的信息。</p>
<p>分类：</p>
<ul>
<li>HTTP请求报文首部</li>
<li>HTTP响应报文首部</li>
</ul>
<p>组成：</p>
<ul>
<li>方法，URL，HTTP版本  /  HTTP版本，状态码</li>
<li>首部字段<ul>
<li>组成：<ul>
<li>通用首部字段</li>
<li>请求首部字段</li>
<li>响应首部字段</li>
<li>实体首部字段</li>
</ul>
</li>
<li>分类：<ul>
<li>端到端首部：会转发到最终目标</li>
<li>逐跳首部<ul>
<li>只对单次转发有效</li>
<li>必须提供<code>Connection</code>首部字段</li>
<li>包含：（其他都为端到端）<ul>
<li><code>Connection</code></li>
<li><code>Keep-Alive</code></li>
<li><code>Proxy-Authenticate</code></li>
<li><code>Proxy-Authorization</code></li>
<li><code>Trailer</code></li>
<li><code>TE</code></li>
<li><code>Transfer-Encoding</code></li>
<li><code>Upgrade</code>    </li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/10/《图解HTTP》(三)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="LENZAKON">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LENZAKON">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/10/《图解HTTP》(三)/" itemprop="url">《图解HTTP》(三)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-10T10:08:18+08:00">
                2018-03-10
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="HTTP报文内的HTTP信息"><a href="#HTTP报文内的HTTP信息" class="headerlink" title="HTTP报文内的HTTP信息"></a>HTTP报文内的HTTP信息</h1><h2 id="HTTP报文"><a href="#HTTP报文" class="headerlink" title="HTTP报文"></a>HTTP报文</h2><ul>
<li><p>报文首部：</p>
<ul>
<li>请求行（状态行）</li>
<li>请求首部字段（响应首部字段）</li>
<li>通用首部字段</li>
<li>实体首部字段</li>
</ul>
</li>
<li><p>报文主体：</p>
</li>
</ul>
<h2 id="编码提升传输效率"><a href="#编码提升传输效率" class="headerlink" title="编码提升传输效率"></a>编码提升传输效率</h2><ul>
<li>优点：能有效处理大量的访问请求</li>
<li>缺点：消耗CPU资源</li>
</ul>
<h3 id="报文和实体"><a href="#报文和实体" class="headerlink" title="报文和实体"></a>报文和实体</h3><ul>
<li>报文：HTTP通信的基本单位</li>
<li>实体：作为请求或响应的有效载荷数据(补充项)被传输,其内容由实体首部和实体主体组成。</li>
</ul>
<p>HTTP 报文的主体用于传输请求或响应的实体主体。</p>
<p>通常报文主体 = 实体主体，编码会导致实体主体改变。</p>
<p>实体可用内容编码进行压缩，服务器压缩，客户端解码。内容编码有：gzip, compress, deflate, identify(不进行编码)</p>
<p>分块传输编码：将实体主体分块，客户端解码，让浏览器逐步显示页面。</p>
<h2 id="发送多种数据的多部分对象集合"><a href="#发送多种数据的多部分对象集合" class="headerlink" title="发送多种数据的多部分对象集合"></a>发送多种数据的多部分对象集合</h2><p>在首部字段加上 <code>Content-type</code></p>
<ul>
<li><p>Web表单文件上传：</p>
<p>  Content-type: multipart/form-data; boundary=AaB03x<br><img src="/images/1520653437010.png" alt="image"></p>
</li>
<li><p>状态码206（部分内容）响应报文包含多个范围的内容：</p>
<p>  Content-Type: multipart/byteranges; boundary=THIS_STRING_SEPARATES<br><img src="/images/1520653482049.png" alt="image">    </p>
</li>
<li><p>boundary 划分多部分对象集合指明的各类实体</p>
</li>
</ul>
<h2 id="获取部分内容的范围请求"><a href="#获取部分内容的范围请求" class="headerlink" title="获取部分内容的范围请求"></a>获取部分内容的范围请求</h2><ul>
<li><p>概念：指定范围发送的请求</p>
</li>
<li><p>使用：请求首部字段的 Range</p>
<ul>
<li>Range: bytes=5001-10000</li>
<li>Range: bytes=5001-</li>
<li>Range: bytes=-3000, 5000-7000</li>
</ul>
</li>
<li><p>响应的状态码为206 Partial Content，对于多范围的范围请求（bytes=-3000, 5000-7000），响应在首部字段：Content-Type: multipart/byteranges</p>
</li>
<li><p>如果服务器无法响应范围请求，返回200和完整实体。</p>
</li>
</ul>
<h2 id="协商返回最合适的内容"><a href="#协商返回最合适的内容" class="headerlink" title="协商返回最合适的内容"></a>协商返回最合适的内容</h2><ul>
<li><p>根据首部字段：Accept, Accept-Charset, Accept-Encoding, Accept-Language, Content-Language</p>
</li>
<li><p>内容协商技术</p>
<ul>
<li>服务器驱动协商</li>
<li>客户端驱动协商</li>
<li>透明协商           </li>
</ul>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/05/状态码3xx/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="LENZAKON">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LENZAKON">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/05/状态码3xx/" itemprop="url">状态码3xx</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-05T13:34:31+08:00">
                2018-03-05
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="状态码3xx重定向理解"><a href="#状态码3xx重定向理解" class="headerlink" title="状态码3xx重定向理解"></a>状态码3xx重定向理解</h1><h2 id="例子："><a href="#例子：" class="headerlink" title="例子："></a>例子：</h2><p>假设要访问一个 url ，该 url 没有尾部斜杠，认为请求的是文件</p>
<ul>
<li>若文件存在，发送文件</li>
<li>若文件不存在，判断同名的目录是否存在 。<ul>
<li>若存在，返回301，并在原来的 url 上添加 ‘/’ 作为要跳转到的 location</li>
<li>若不存在，返回404</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">res.wirteHead(<span class="number">301</span>, &#123;</span><br><span class="line">    <span class="string">'Location'</span>: location  <span class="comment">// url + '/'</span></span><br><span class="line">    ...</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>浏览器收到301响应时，会根据头部指定的 location 字段值，向服务器发一个新请求。</p>
<p>例子：访问<code>localhost:9527/testfolder</code><br><img src="/images/1520228343406.png" alt="image"></p>
<p>参考资料：<br><a href="https://github.com/sheila1227/FE-blog/issues/1" target="_blank" rel="noopener">使用node搭建静态资源服务器</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/02/03/路由/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="LENZAKON">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LENZAKON">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/02/03/路由/" itemprop="url">路由</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-02-03T16:25:57+08:00">
                2018-02-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Router"><a href="#Router" class="headerlink" title="Router"></a>Router</h1><p>浏览器中一种处理先后访问关系的机制，即允许在不同页面中跳转，记录跳转关系还能退回去的机制</p>
<h2 id="要素："><a href="#要素：" class="headerlink" title="要素："></a>要素：</h2><ul>
<li>历史：栈形式数据结构</li>
<li>跳转：不同页面之间进行跳转，并可以传递参数</li>
<li>事件：打开新页面或退回上一个页面触发的逻辑</li>
</ul>
<h2 id="常见router"><a href="#常见router" class="headerlink" title="常见router:"></a>常见router:</h2><h3 id="页面Router"><a href="#页面Router" class="headerlink" title="页面Router:"></a>页面Router:</h3><p>真正的页面跳转，跳转后整个页面都会按照新的路径重新加载，回退的时候也是整个页面重新渲染<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.location.href = <span class="string">''</span></span><br><span class="line">history.back();  <span class="comment">// 回退</span></span><br></pre></td></tr></table></figure></p>
<p>通过浏览器按钮后退</p>
<h3 id="Hash-Router"><a href="#Hash-Router" class="headerlink" title="Hash Router:"></a>Hash Router:</h3><p>只有路径的hash值在发生变化，页面没有重新加载，只是跳到当前页面hash指定的状态，后退时也是跳到上一个hash状态，整个页面不会刷新。兼容性好<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.location.href = <span class="string">'#test'</span></span><br><span class="line"><span class="built_in">window</span>.onhashchange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="built_in">console</span>.log(<span class="built_in">window</span>.location.hash)&#125;</span><br></pre></td></tr></table></figure></p>
<p>或者<br>通过\<a>链接跳转</a></p>
<h3 id="H5-router"><a href="#H5-router" class="headerlink" title="H5 router:"></a>H5 router:</h3><p>js的history对象中提供一个新的方法，手动在路由历史里推进一个新值，点击浏览器后退按钮还可以通过事件进行截获浏览器后退按钮触发的事件，保证在模拟路由的同时不做页面跳转。能操作整个路径，也能操作hash，兼容性较差<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 推进一个状态</span></span><br><span class="line">history.pushState(<span class="string">'test'</span>, <span class="string">'Title'</span>, <span class="string">'#test'</span>)</span><br><span class="line">history.pushState(<span class="string">'test1'</span>, <span class="string">'Title'</span>, <span class="string">'/user/index'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 前进和后退都会输出，输出的是 name ，即pushState函数的第一个参数</span></span><br><span class="line"><span class="built_in">window</span>.onpopstate = <span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;<span class="built_in">console</span>.log(e.state)&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 替换一个状态，进行替换，原来的消失了</span></span><br><span class="line">history.replaceState(<span class="string">'test'</span>, <span class="string">'Tittle'</span>, <span class="string">'/index/test'</span>)</span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">LENZAKON</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">57</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            

            

          </nav>

          

          <div class="links-of-author motion-element">
            
          </div>

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">LENZAKON</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.3</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.3"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
